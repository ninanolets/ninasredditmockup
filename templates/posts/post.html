{% extends 'base.html' %}

{% load static %}
{% load humanize %}

{% block title %} | {{ post.title }} {% endblock  %}

{% block content %}

<div class="container p-0">
	<div class="bg-gray px-5">
		<div class="d-flex">
			<img class="border rounded-circle border-white border-10 bg-white my-3 fit" height="50" width="50"
			{% if post.subreddit.avatar %} src="{{ post.subreddit.avatar.url }}"
			{% else %} src="{% static 'img/avatar-gray.png' %}"
			{% endif %}>

			<div class="mt-4 mb-2 pl-3 d-flex w-100">
				<div class="pr-5 text-white">
					<h2 class="font-weight-light"><a class="no-link" href="{% url 'subreddit' post.subreddit.id %}">/{{ post.subreddit }}</a></h2>
				</div>
			</div>
		</div>
	</div>


	<div class="">
		<div class="d-flex bg-dark text-light py-2 px-5">
			&#124; <a class="highlight-bg-dark align-center" href="/post/{{ post.id }}/upvote_post">
				<img src="{% static 'img/upvote.png' %}" class="logo mx-1" alt="upvote" height="15">
				
				<form id="upvote_post" method="POST" action="{% url 'upvote_post' post.id %}">
						{% csrf_token %}<input type="hidden">
				</form>
			</a> 

			
			<p class="m-0 px-2">{{ post.upvotes.count | intcomma }}</p> &#124;
			<p class="pl-4 m-0 font-weight-light">{{ post.custom_title }}</p>

			{% if user.is_authenticated %}
			
			<a class="no-link btn btn-danger py-0 ml-auto" href="/post/delete/{{ post.id }}">Delete Post</a>
			<form id="delete_post" method="DELETE" action="{% url 'delete_post' post.id %}">
					{% csrf_token %}<input type="hidden">
			</form>

			{% endif %}
		</div>

		<div class="bg-gray-2 px-5 py-4">
			<div class="col-10">
			<!-- Alerts -->
			{% include 'partials/_alerts.html' %}
			</div>
			<div class="p-3 border rounded bg-white col-10 ">
				<div class="d-flex">
					<div class="flex-shrink-1 pr-4 d-flex flex-column align-items-center justify-content-start">

						<a class="pb-1 highlight-bg" href="/post/{{ post.id }}/upvote_post">
							<img src="{% static 'img/upvote.png' %}" class="logo mx-1" alt="upvote" height="15" >
							<form id="upvote_post" method="POST" action="{% url 'upvote_post' post.id %}">
								{% csrf_token %}<input type="hidden">
							</form>
						</a>
						{{ post.upvotes.count | intcomma }}
						
					</div>

					<div>
						<div class="text-secondary pr-5">
							Posted by <a class="pr-4 text-secondary" href="#">/{{ post.user }}</a><a class="text-secondary" href="{% url 'post' post.id %}"><img height="15" src="{% static 'img/clock.png' %}"> {{ post.pub_date | naturaltime }}</a>
							<h4 class="m-0 pt-1 pb-3 text-dark">{{ post.title }}</h4>
						</div>
						<div class="mb-4">
							{% if post.photo %}
							<img class="mx-auto d-block pr-0" src="{{ post.photo.url }}">
							{% endif %}
							{% if post.content %}
							<p class="pt-4"> {{ post.content }}</p>
							{% endif %}
							<div class="mt-5">
								<!-- Comments -->
								{% include 'partials/_comments.html' %}
							</div>
						</div>
						
					</div>
				</div>
				
			</div>
		</div>
	</div> 
</div>

{% endblock %}